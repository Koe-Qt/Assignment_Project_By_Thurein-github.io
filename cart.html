<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>

<body>
    <!-- navbar -->
    <nav>
        <div class="navbar-brand">
            <img src="./Image/Contemporary Wordmark Coffee Logo.png" alt="">
            <span>BEAN BOUTIQUE</span>
        </div>

        <!-- nav-icon -->
        <input type="checkbox" id="menu-checkbox">
        <label for="menu-checkbox" class="menu-toggle">
            <i class="bi bi-list"></i>
        </label>

        <!-- nav links -->
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="equip.html">Equipment</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="cart.html" class="active">Shopping Cart</a></li>
            <li><a href="offers.html">Special Offers</a></li>
        </ul>
    </nav>
    <!-- navbar -->
    <!-- cart -->
    <section class="cart-section">
        <div class="container">
            <h2 class="cart-ttl">Your Cart</h2>
            <table>
                <tr>
                    <th>Product Name</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Total</th>
                    <th>Action</th>
                </tr>

                <tbody id="cart-body">

                </tbody>
            </table>
            <h1 class="text-end">Total $ <span id="total"></span></h1>
            <a href="#checkoutForm" class="btn checkout-btn" onclick="showForm()">Proceed Checkout</a>
        </div>
        </div>
        </div>
    </section>
    <!-- cart -->
    <!-- checkout -->

    <section></section>
    <div class="checkout-form" id="checkoutForm">
        <h2>Checkout Form</h2>

        <label for="email">Email:</label>
        <input type="email" id="email" placeholder="Enter your email">

        <label for="payment">Payment Method:</label>
        <select id="payment">
            <option value="">How will you pay?</option>
            <option>Credit Card</option>
            <option>Cash on Delivery</option>
            <option>Bank Transfer</option>
        </select>

        <label for="coupon">Discount Coupon (Optional):</label>
        <input type="text" id="coupon" placeholder="Enter coupon code (Optional)">

        <button class="order-btn" onclick="confirmOrder()">Confirm Order</button>
    </div><br><br>


    <!-- checkout -->


    <!-- Footer -->
    <footer class="ftbgcolor">
        <div class="container">
            <div class="row">
                <div class="col4">
                    <h4>BEAN BOUTIQUE</h4>
                    <p>At Bean Boutique coffee shop, the aroma of fresh brews filled the air. Students studied, artists
                        sketched, friends laughed, and baristas crafted cups of joy, creating warmth and unforgettable
                        connections daily.
                    </p>
                </div>
                <div class="col4">
                    <h4>Quick Links</h4>
                    <div class="link">
                        <a href="index.html" class="ftlink">Home</a>
                        <a href="products.html" class="ftlink">Products</a>
                        <a href="equip.html" class="ftlink">Equipment</a>
                        <a href="events.html" class="ftlink">Events</a>
                        <a href="cart.html" class="ftlink">Cart</a>
                        <a href="offers.html" class="ftlink">Offers</a>
                    </div>
                </div>
                <div class="col4">
                    <h4>Contact Information</h4>
                    <p>No.12, Hledan St, Yangon</p>
                    <p>09 12345678</p>
                    <p>beanboutique7@gmail.com</p>
                </div>
                <div class="col4">
                    <h4>Follow Us</h4>
                    <i class="bi bi-facebook fticons"></i>
                    <i class="bi bi-instagram fticons"></i>
                    <i class="bi bi-twitter fticons"></i>
                    <i class="bi bi-linkedin fticons"></i>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer -->

    <!-- cart table -->
    <script>
        let cart_body = document.getElementById('cart-body')
        let total = document.getElementById('total')
        let cart = JSON.parse(sessionStorage.getItem('cart')) || {}
        let carttotal = 0

        for (const [name, details] of Object.entries(cart)) {
            let itemtotal = details.price * details.quantity
            carttotal += itemtotal

            let row = document.createElement('tr')
            row.innerHTML = `
          <td>${name}</td>
          <td>
            <button class="qty-btn decrease" data-name="${name}">-</button>
            <span>${details.quantity}</span>
            <button class="qty-btn increase" data-name="${name}">+</button>
          </td>
          <td>$ ${details.price}</td>
          <td>$ ${itemtotal}</td>
          <td><i class="bi bi-trash remove-btn" data-name="${name}"></i></td>
        `
            cart_body.appendChild(row)
        }


        // remove item
        let remove_btn = document.querySelectorAll('.remove-btn')
        remove_btn.forEach((button) => {
            button.addEventListener('click', (e) => {
                let name = e.target.dataset.name
                delete cart[name]
                sessionStorage.setItem('cart', JSON.stringify(cart))
                location.reload()
            })
        })

        // increase qty
        let increase_btn = document.querySelectorAll('.increase')
        increase_btn.forEach((button) => {
            button.addEventListener('click', (e) => {
                let name = e.target.dataset.name
                cart[name].quantity++
                sessionStorage.setItem('cart', JSON.stringify(cart))
                location.reload()
            })
        })

        // decrease qty
        let decrease_btn = document.querySelectorAll('.decrease')
        decrease_btn.forEach((button) => {
            button.addEventListener('click', (e) => {
                let name = e.target.dataset.name
                cart[name].quantity--
                if (cart[name].quantity <= 0) {
                    delete cart[name]
                }
                sessionStorage.setItem('cart', JSON.stringify(cart))
                location.reload()
            })
        })

        total.textContent = carttotal
    </script>
    <!-- cart table -->

    <!-- checkout -->
    <script>
        function showForm() {
            document.getElementById("checkoutForm").style.display = "block"
        }

        function confirmOrder() {
            event.preventDefault()
            let email = document.getElementById('email').value
            let payment = document.getElementById('payment').value
            let coupon = document.getElementById('coupon').value
            if (email == "" || payment == "") {
                alert("Please Fill Your Data!")
            } else {
                alert(`âœ… Purchase successful! Thank you for shopping with us.
Email : ${email}
Payment : ${payment}
Coupon : ${coupon}`)

                // hide form
                document.getElementById("checkoutForm").style.display = "none"

                // clear table
                document.getElementById("cart-body").innerHTML = ""

                // reset total
                document.getElementById("total").textContent = "0"

                // clear session storage
                sessionStorage.removeItem("cart")
            }
        }
    </script>
    <!-- checkout -->



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>

</html>